var FontInspector=function(){function g(){for(var b=document.querySelectorAll("div["+e+"]"),a=0,c=b.length;a<c;++a)b[a].className="debuggerHideText"}function f(b,a){for(var c=document.querySelectorAll("div["+e+"="+b+"]"),d=0,f=c.length;d<f;++d)c[d].className=a?"debuggerShowText":"debuggerHideText"}function a(b){if(b.target.dataset.fontName&&"DIV"==b.target.tagName)for(var b=b.target.dataset.fontName,a=document.getElementsByTagName("input"),c=0;c<a.length;++c){var e=a[c];e.dataset.fontName==b&&(e.checked=
!e.checked,f(b,e.checked),e.scrollIntoView())}}var c,d=!1,e="data-font-name";return{id:"FontInspector",name:"Font Inspector",panel:null,manager:null,init:function(){var b=this.panel;b.setAttribute("style","padding: 5px;");var a=document.createElement("button");a.addEventListener("click",g);a.textContent="Refresh";b.appendChild(a);c=document.createElement("div");b.appendChild(c)},enabled:!1,get active(){return d},set active(b){if(d=b)document.body.addEventListener("click",a,!0),g();else{document.body.removeEventListener("click",
a,!0);for(var b=document.querySelectorAll("div["+e+"]"),c=0,f=b.length;c<f;++c)b[c].className=""}},fontAdded:function(b,a){var e=function(b,a){for(var c=document.createElement("table"),e=0;e<a.length;e++){var d=document.createElement("tr"),f=document.createElement("td");f.textContent=a[e];d.appendChild(f);f=document.createElement("td");f.textContent=b[a[e]].toString();d.appendChild(f);c.appendChild(d)}return c}(b,["name","type"]),d=/url\(['"]?([^\)"']+)/.exec(a),l=b.loadedName,i=document.createElement("div"),
j=document.createElement("span");j.textContent=l;var o=document.createElement("a");o.href=d[1];o.textContent="Download";d=document.createElement("a");d.href="";d.textContent="Log";d.addEventListener("click",function(a){a.preventDefault();console.log(b)});var m=document.createElement("input");m.setAttribute("type","checkbox");m.dataset.fontName=l;m.addEventListener("click",function(a,b){return function(){f(b,a.checked)}}(m,l));i.appendChild(m);i.appendChild(j);i.appendChild(document.createTextNode(" "));
i.appendChild(o);i.appendChild(document.createTextNode(" "));i.appendChild(d);i.appendChild(e);c.appendChild(i);setTimeout(function(){this.active&&g()}.bind(this),2E3)}}}(),StepperManager=function(){var g=[],f=null,a=null,c=null,d={};return{id:"Stepper",name:"Stepper",panel:null,manager:null,init:function(){var e=this;this.panel.setAttribute("style","padding: 5px;");a=document.createElement("div");c=document.createElement("select");c.addEventListener("change",function(){e.selectStepper(this.value)});
a.appendChild(c);f=document.createElement("div");this.panel.appendChild(a);this.panel.appendChild(f);sessionStorage.getItem("pdfjsBreakPoints")&&(d=JSON.parse(sessionStorage.getItem("pdfjsBreakPoints")))},enabled:!1,active:!1,create:function(a){var b=document.createElement("div");b.id="stepper"+a;b.setAttribute("hidden",!0);b.className="stepper";f.appendChild(b);var h=document.createElement("option");h.textContent="Page "+(a+1);h.value=a;c.appendChild(h);b=new Stepper(b,a,d[a]||[]);g.push(b);1===
g.length&&this.selectStepper(a,!1);return b},selectStepper:function(a,b){b&&this.manager.selectPanel(1);for(var d=0;d<g.length;++d){var f=g[d];f.pageIndex==a?f.panel.removeAttribute("hidden"):f.panel.setAttribute("hidden",!0)}f=c.options;for(d=0;d<f.length;++d){var k=f[d];k.selected=k.value==a}},saveBreakPoints:function(a,b){d[a]=b;sessionStorage.setItem("pdfjsBreakPoints",JSON.stringify(d))}}}(),Stepper=function(){function g(f,a,c){this.panel=f;this.len;this.breakPoint=0;this.nextBreakPoint=null;
this.pageIndex=a;this.breakPoints=c;this.currentIdx=-1}g.prototype={init:function(f){function a(a,b){var c=document.createElement(a);b&&(c.textContent=b);return c}var c=this.panel;this.len=f.fnArray.length;var d=a("div","c=continue, s=step"),e=a("table");d.appendChild(e);e.cellSpacing=0;var b=a("tr");e.appendChild(b);b.appendChild(a("th","Break"));b.appendChild(a("th","Idx"));b.appendChild(a("th","fn"));b.appendChild(a("th","args"));for(b=0;b<f.fnArray.length;b++){var h=a("tr");h.className="line";
h.dataset.idx=b;e.appendChild(h);var g=-1!=this.breakPoints.indexOf(b),k=f.argsArray[b]?f.argsArray[b]:[],l=a("td"),i=a("input");i.type="checkbox";i.className="points";i.checked=g;var j=this;i.onclick=function(a){return function(){this.checked?j.breakPoints.push(a):j.breakPoints.splice(j.breakPoints.indexOf(a),1);StepperManager.saveBreakPoints(j.pageIndex,j.breakPoints)}}(b);l.appendChild(i);h.appendChild(l);h.appendChild(a("td",b.toString()));h.appendChild(a("td",f.fnArray[b]));h.appendChild(a("td",
k.join(", ")))}c.appendChild(d);j=this},getNextBreakPoint:function(){this.breakPoints.sort(function(a,c){return a-c});for(var f=0;f<this.breakPoints.length;f++)if(this.breakPoints[f]>this.currentIdx)return this.breakPoints[f];return null},breakIt:function(f,a){StepperManager.selectStepper(this.pageIndex,!0);var c=this,d=document;c.currentIdx=f;var e=function(b){switch(b.keyCode){case 83:d.removeEventListener("keydown",e,!1);c.nextBreakPoint=c.currentIdx+1;c.goTo(-1);a();break;case 67:d.removeEventListener("keydown",
e,!1),b=c.getNextBreakPoint(),c.nextBreakPoint=b,c.goTo(-1),a()}};d.addEventListener("keydown",e,!1);c.goTo(f)},goTo:function(f){for(var a=this.panel.getElementsByClassName("line"),c=0,d=a.length;c<d;++c){var e=a[c];e.dataset.idx==f?(e.style.backgroundColor="rgb(251,250,207)",e.scrollIntoView()):e.style.backgroundColor=null}}};return g}(),Stats=function(){function g(a){for(;a.hasChildNodes();)a.removeChild(a.lastChild)}function f(c){for(var d=0,e=a.length;d<e;++d)if(a[d].pageNumber===c)return d;return!1}
var a=[];return{id:"Stats",name:"Stats",panel:null,manager:null,init:function(){this.panel.setAttribute("style","padding: 5px;");PDFJS.enableStats=!0},enabled:!1,active:!1,add:function(c,d){if(d){var e=f(c);!1!==e&&(this.panel.removeChild(a[e].div),a.splice(e,1));e=document.createElement("div");e.className="stats";var b=document.createElement("div");b.className="title";b.textContent="Page: "+c;var h=document.createElement("div");h.textContent=d.toString();e.appendChild(b);e.appendChild(h);a.push({pageNumber:c,
div:e});a.sort(function(a,b){return a.pageNumber-b.pageNumber});g(this.panel);e=0;for(b=a.length;e<b;++e)this.panel.appendChild(a[e].div)}}}}(),PDFBug=function(){var g=[],f=null;return{tools:[FontInspector,StepperManager,Stats],enable:function(a){var c=!1,d=this.tools;1===a.length&&"all"===a[0]&&(c=!0);for(var e=0;e<d.length;++e){var b=d[e];if(c||-1!==a.indexOf(b.id))b.enabled=!0}c||d.sort(function(b,c){var e=a.indexOf(b.id),e=0>e?d.length:e,f=a.indexOf(c.id),f=0>f?d.length:f;return e-f})},init:function(){var a=
document.createElement("div");a.id="PDFBug";var c=document.createElement("div");c.setAttribute("class","controls");a.appendChild(c);var d=document.createElement("div");d.setAttribute("class","panels");a.appendChild(d);document.body.appendChild(a);document.body.style.paddingRight="300px";for(var a=this.tools,e=0;e<a.length;++e){var b=a[e],f=document.createElement("div"),n=document.createElement("button");n.textContent=b.name;var k=this;n.addEventListener("click",function(a){return function(b){b.preventDefault();
k.selectPanel(a)}}(e));c.appendChild(n);d.appendChild(f);b.panel=f;b.manager=this;b.enabled?b.init():f.textContent=b.name+' is disabled. To enable add  "'+b.id+'" to the pdfBug parameter and refresh (seperate multiple by commas).';g.push(n)}this.selectPanel(0)},selectPanel:function(a){if(a!==f){f=a;for(var c=this.tools,d=0;d<c.length;++d)d==a?(g[d].setAttribute("class","active"),c[d].active=!0,c[d].panel.removeAttribute("hidden")):(g[d].setAttribute("class",""),c[d].active=!1,c[d].panel.setAttribute("hidden",
"true"))}}}}();
