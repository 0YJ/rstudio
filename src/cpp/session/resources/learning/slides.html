<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>#!title#</title>
  
  <!-- reveal.js -->
  <link rel="stylesheet" href="revealjs/css/reveal.css">
  <link rel="stylesheet" href="revealjs/css/theme/simple.css" id="theme">
  
  <style type="text/css">
  #!styles#
  </style>
  
  #!r_highlight#
   
  #!mathjax#  
  
</head>

<body>
  <div class="reveal">
  <div class="slides">

     #!slides#

  </div>
  </div>

  <script src="revealjs/lib/js/head.min.js"></script>
  <script src="revealjs/js/reveal.js"></script>
    
  <script>
    
    function pausePlayers(players) {
      for(var i = 0; i < players.length; i++) {
        players[i].pause();
      }
    }
    
    function notifySlideChanged(indexh) {
    
      // pause all audio and video
      pausePlayers(document.getElementsByTagName('video'));
      pausePlayers(document.getElementsByTagName('audio'))
     
      // execute slide-specific commants 
      var cmds = []; 
      switch(event.indexh) {
#!slide_commands#
        default:
          break;
      };
      
      if (window.parent.learningSlideChanged)
        window.parent.learningSlideChanged(event.indexh, cmds);  
    }

    Reveal.initialize({
      controls: true,
      progress: true,
      history: true,
      overview: false,
      center: false,
      rollingLinks: false,

      theme: 'simple', 
      transition: 'linear', 

      dependencies: [
        { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } }
      ]
    });
    
    Reveal.addEventListener( 'ready', function( event ) {
       // notify container
      notifySlideChanged(event.indexh)
    } );
    
    Reveal.addEventListener( 'slidechanged', function( event ) {
         
      // notify container
      notifySlideChanged(event.indexh)
     
      // allow mathjax to re-render
      if (window.MathJax)
        window.MathJax.Hub.Rerender(event.currentSlide);  
    });
    
    if (window.parent.learningKeydown)
      window.onkeydown = function(e) {window.parent.learningKeydown(e);}
    
  </script>

</body>

</html>
